<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Configuration Firewall UFW - Thomas Thédié</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f4f4f9;
        color: #333;
    }
    header {
        background: #2c3e50;
        color: white;
        padding: 15px;
        text-align: center;
    }
    main {
        padding: 20px;
        max-width: 950px;
        margin: auto;
    }
    h2 {
        color: #2c3e50;
    }
    pre {
        background: #272822;
        color: #f8f8f2;
        padding: 12px;
        border-radius: 6px;
        overflow-x: auto;
    }
    .box {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
</style>
</head>
<body>

<header>
    <h1>Configuration complète du Firewall UFW</h1>
</header>

<main>

    <div class="box">
        <h2>1. Introduction</h2>
        <p>
            <strong>UFW (Uncomplicated Firewall)</strong> est un outil simplifié pour gérer 
            <strong>iptables</strong> sur Linux.  
            Il permet de contrôler facilement les connexions <strong>entrantes</strong> et <strong>sortantes</strong>.  
        </p>
        <p>
            Utiliser un pare-feu est essentiel pour :  
            <ul>
                <li>Limiter les services exposés</li>
                <li>Protéger les serveurs contre les attaques</li>
                <li>Filtrer le trafic réseau par ports, protocoles et IP</li>
            </ul>
        </p>
    </div>

    <div class="box">
        <h2>2. Installation et activation</h2>
        <pre>
sudo apt update
sudo apt install ufw -y
sudo ufw enable
sudo ufw status verbose
        </pre>
    </div>

    <div class="box">
        <h2>3. Politiques par défaut</h2>
        <p>Définir les règles par défaut avant d’ajouter des exceptions :</p>
        <pre>
# Bloquer tout le trafic entrant
sudo ufw default deny incoming

# Autoriser tout le trafic sortant
sudo ufw default allow outgoing
        </pre>
    </div>

    <div class="box">
        <h2>4. Gestion des règles</h2>
        <h3>Autoriser des services</h3>
        <pre>
sudo ufw allow ssh
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
        </pre>

        <h3>Bloquer un service ou un port</h3>
        <pre>
sudo ufw deny 23/tcp
        </pre>

        <h3>Supprimer une règle</h3>
        <pre>
sudo ufw delete allow 22/tcp
        </pre>

        <h3>Autoriser un protocole précis</h3>
        <pre>
sudo ufw allow 53/udp
        </pre>
    </div>

    <div class="box">
        <h2>5. Règles basées sur IP</h2>
        <h3>Autoriser une IP</h3>
        <pre>
sudo ufw allow from 192.168.1.50
        </pre>

        <h3>Autoriser une plage d’IP</h3>
        <pre>
sudo ufw allow from 192.168.1.0/24
        </pre>

        <h3>Autoriser une IP uniquement sur un port</h3>
        <pre>
sudo ufw allow from 192.168.1.50 to any port 22
        </pre>
    </div>

    <div class="box">
        <h2>6. Mode avancé</h2>
        <h3>Limiter le nombre de connexions (protection brute force SSH)</h3>
        <pre>
sudo ufw limit ssh
        </pre>

        <h3>Autoriser uniquement certains ports sortants</h3>
        <pre>
sudo ufw default deny outgoing
sudo ufw allow out 80/tcp
sudo ufw allow out 443/tcp
        </pre>

        <h3>Enregistrer les logs UFW</h3>
        <pre>
sudo ufw logging on
sudo tail -f /var/log/ufw.log
        </pre>

        <h3>Gérer les profils d’applications (intégration avec /etc/services)</h3>
        <pre>
sudo ufw app list
sudo ufw allow "Apache Full"
sudo ufw allow "OpenSSH"
        </pre>
    </div>

    <div class="box">
        <h2>7. Exemples pratiques</h2>

        <h3>Serveur Web</h3>
        <pre>
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
        </pre>

        <h3>Serveur SSH sécurisé</h3>
        <pre>
sudo ufw allow from 203.0.113.10 to any port 22
sudo ufw limit ssh
        </pre>

        <h3>Serveur d’entreprise (utilisateurs / admins)</h3>
        <pre>
# Autoriser utilisateurs internes
sudo ufw allow from 192.168.10.0/24

# Autoriser admin sur SSH
sudo ufw allow from 192.168.30.10 to any port 22
        </pre>
    </div>

    <div class="box">
        <h2>8. Vérification et dépannage</h2>
        <pre>
# Afficher les règles actives
sudo ufw status numbered

# Supprimer une règle par numéro
sudo ufw delete NUM

# Réinitialiser complètement UFW
sudo ufw reset
        </pre>
        <p>
            En cas de blocage réseau, il est recommandé de vérifier les logs avec :  
            <code>sudo tail -f /var/log/ufw.log</code>  
        </p>
    </div>

</main>

</body>
</html>
